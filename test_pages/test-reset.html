<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ¸¬è©¦é‡ç½® - éš±æ¹–å°ç«¹</title>
    <style>
      body {
        font-family: "Noto Sans TC", sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .status {
        background: #e8f5e8;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
        border-left: 4px solid #4a7c59;
      }
      .warning {
        background: #fff3cd;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
        border-left: 4px solid #ffc107;
      }
      .btn {
        background: #4a7c59;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
        font-size: 14px;
      }
      .btn:hover {
        background: #2c5530;
      }
      .btn-danger {
        background: #dc3545;
      }
      .btn-danger:hover {
        background: #c82333;
      }
      .info {
        background: #d1ecf1;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
        border-left: 4px solid #17a2b8;
      }
      pre {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 5px;
        overflow-x: auto;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ§ª æ¸¬è©¦é‡ç½®å·¥å…·</h1>
      <p>é€™å€‹é é¢ç”¨æ–¼æ¸¬è©¦å’Œé‡ç½®ç¶²ç«™è¨­å®šï¼Œæ–¹ä¾¿é–‹ç™¼å’Œæ¸¬è©¦ã€‚</p>

      <div class="info">
        <h3>ğŸ“‹ ç•¶å‰ç‹€æ…‹</h3>
        <div id="current-status">è¼‰å…¥ä¸­...</div>
      </div>

      <div class="warning">
        <h3>âš ï¸ æ³¨æ„äº‹é …</h3>
        <ul>
          <li>é‡ç½®å¾Œæœƒæ¸…é™¤æ‰€æœ‰æœ¬åœ°å„²å­˜çš„è¨­å®š</li>
          <li>éœ€è¦é‡æ–°åŒæ„ Cookie è¨­å®š</li>
          <li>æœƒé‡æ–°é¡¯ç¤ºæ­¡è¿é é¢</li>
          <li>è³¼ç‰©è»Šå…§å®¹æœƒè¢«æ¸…ç©º</li>
        </ul>
      </div>

      <div class="status">
        <h3>ğŸ› ï¸ æ“ä½œé¸é …</h3>
        <button class="btn" onclick="checkStatus()">æª¢æŸ¥ç‹€æ…‹</button>
        <button class="btn" onclick="resetAll()">é‡ç½®æ‰€æœ‰è¨­å®š</button>
        <button class="btn" onclick="resetWelcome()">åªé‡ç½®æ­¡è¿é é¢</button>
        <button class="btn" onclick="resetCookie()">åªé‡ç½® Cookie è¨­å®š</button>
        <button class="btn btn-danger" onclick="clearAll()">
          æ¸…é™¤æ‰€æœ‰è³‡æ–™
        </button>
      </div>

      <div class="info">
        <h3>ğŸ”— æ¸¬è©¦é€£çµ</h3>
        <a href="index.html" class="btn">æ¸¬è©¦æ­¡è¿é é¢</a>
        <a href="home.html" class="btn">æ¸¬è©¦ä¸»é é¢</a>
        <a href="privacy-policy.html" class="btn">éš±ç§æ¬Šæ”¿ç­–</a>
        <a href="security-settings.html" class="btn">å®‰å…¨è¨­å®š</a>
      </div>

      <div class="status">
        <h3>ğŸ“Š è©³ç´°è³‡è¨Š</h3>
        <pre id="detailed-info">é»æ“Šã€Œæª¢æŸ¥ç‹€æ…‹ã€æŸ¥çœ‹è©³ç´°è³‡è¨Š</pre>
      </div>
    </div>

    <script>
      // æª¢æŸ¥ç•¶å‰ç‹€æ…‹
      function checkStatus() {
        const welcomeSeen = localStorage.getItem("yinhu_welcome_seen");
        const cookieConsent = localStorage.getItem("yinhu_cookie_consent");
        const cookiePreferences = localStorage.getItem(
          "yinhu_cookie_preferences"
        );
        const cart = localStorage.getItem("yinhuCart");
        const userProfile = localStorage.getItem("yinhu_user_profile");

        const statusHtml = `
                <strong>æ­¡è¿é é¢ç‹€æ…‹ï¼š</strong> ${
                  welcomeSeen === "true" ? "å·²çœ‹é âœ…" : "æœªçœ‹é âŒ"
                }<br>
                <strong>Cookie åŒæ„ç‹€æ…‹ï¼š</strong> ${
                  cookieConsent === "true" ? "å·²åŒæ„ âœ…" : "æœªåŒæ„ âŒ"
                }<br>
                <strong>Cookie åå¥½è¨­å®šï¼š</strong> ${
                  cookiePreferences ? "å·²è¨­å®š âœ…" : "æœªè¨­å®š âŒ"
                }<br>
                <strong>è³¼ç‰©è»Šå…§å®¹ï¼š</strong> ${
                  cart ? "æœ‰å…§å®¹ âœ…" : "ç©º âŒ"
                }<br>
                <strong>ç”¨æˆ¶è³‡æ–™ï¼š</strong> ${
                  userProfile ? "å·²å„²å­˜ âœ…" : "æœªå„²å­˜ âŒ"
                }
            `;

        document.getElementById("current-status").innerHTML = statusHtml;

        const detailedInfo = {
          welcomeSeen: welcomeSeen,
          cookieConsent: cookieConsent,
          cookiePreferences: cookiePreferences
            ? JSON.parse(cookiePreferences)
            : null,
          cart: cart ? JSON.parse(cart) : null,
          userProfile: userProfile ? JSON.parse(userProfile) : null,
          allKeys: Object.keys(localStorage).filter((key) =>
            key.startsWith("yinhu")
          ),
        };

        document.getElementById("detailed-info").textContent = JSON.stringify(
          detailedInfo,
          null,
          2
        );
      }

      // é‡ç½®æ‰€æœ‰è¨­å®š
      function resetAll() {
        if (confirm("ç¢ºå®šè¦é‡ç½®æ‰€æœ‰è¨­å®šå—ï¼Ÿé€™æœƒæ¸…é™¤æ­¡è¿é é¢å’Œ Cookie è¨­å®šã€‚")) {
          localStorage.removeItem("yinhu_welcome_seen");
          localStorage.removeItem("yinhu_cookie_consent");
          localStorage.removeItem("yinhu_cookie_preferences");
          alert("âœ… æ‰€æœ‰è¨­å®šå·²é‡ç½®ï¼ç¾åœ¨å¯ä»¥é‡æ–°æ¸¬è©¦æ­¡è¿é é¢å’Œ Cookie é€šçŸ¥ã€‚");
          checkStatus();
        }
      }

      // åªé‡ç½®æ­¡è¿é é¢
      function resetWelcome() {
        if (confirm("ç¢ºå®šè¦é‡ç½®æ­¡è¿é é¢è¨­å®šå—ï¼Ÿ")) {
          localStorage.removeItem("yinhu_welcome_seen");
          alert("âœ… æ­¡è¿é é¢è¨­å®šå·²é‡ç½®ï¼");
          checkStatus();
        }
      }

      // åªé‡ç½® Cookie è¨­å®š
      function resetCookie() {
        if (confirm("ç¢ºå®šè¦é‡ç½® Cookie è¨­å®šå—ï¼Ÿ")) {
          localStorage.removeItem("yinhu_cookie_consent");
          localStorage.removeItem("yinhu_cookie_preferences");
          alert("âœ… Cookie è¨­å®šå·²é‡ç½®ï¼");
          checkStatus();
        }
      }

      // æ¸…é™¤æ‰€æœ‰è³‡æ–™
      function clearAll() {
        if (
          confirm(
            "âš ï¸ è­¦å‘Šï¼šé€™æœƒæ¸…é™¤æ‰€æœ‰æœ¬åœ°å„²å­˜çš„è³‡æ–™ï¼ŒåŒ…æ‹¬è³¼ç‰©è»Šã€ç”¨æˆ¶è³‡æ–™ç­‰ã€‚ç¢ºå®šè¦ç¹¼çºŒå—ï¼Ÿ"
          )
        ) {
          if (confirm("æœ€å¾Œç¢ºèªï¼šç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰è³‡æ–™å—ï¼Ÿ")) {
            localStorage.clear();
            alert("âœ… æ‰€æœ‰è³‡æ–™å·²æ¸…é™¤ï¼");
            checkStatus();
          }
        }
      }

      // é é¢è¼‰å…¥æ™‚è‡ªå‹•æª¢æŸ¥ç‹€æ…‹
      window.addEventListener("DOMContentLoaded", function () {
        checkStatus();
      });
    </script>
  </body>
</html>
